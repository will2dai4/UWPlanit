# ==============================================
# UWPlanit API - Environment Configuration
# ==============================================
# Copy this file to .env and update with your actual values
# Command: cp env.example .env

# ----------------------------------------------
# Server Configuration
# ----------------------------------------------
PORT=4000
NODE_ENV=development

# ----------------------------------------------
# Database Configuration (PostgreSQL)
# ----------------------------------------------
# For local development with Docker:
DATABASE_URL=postgres://uwplanit:dev@db:5432/uwplanit

# For local development without Docker:
# DATABASE_URL=postgres://uwplanit:dev@localhost:5432/uwplanit

# For Supabase (production):
# DATABASE_URL=postgres://postgres:[YOUR-PASSWORD]@db.[PROJECT-REF].supabase.co:5432/postgres

# Docker Postgres Configuration (only needed for docker-compose)
POSTGRES_USER=uwplanit
POSTGRES_PASSWORD=dev
POSTGRES_DB=uwplanit

# ----------------------------------------------
# Supabase Authentication
# ----------------------------------------------
# Get these from your Supabase project dashboard
# Dashboard → Settings → API

NEXT_PUBLIC_SUPABASE_URL=https://your-project-ref.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=your-anon-key-here

# Service role key (optional, for admin operations)
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key-here

# JWT Secret for token verification
# Dashboard → Settings → API → JWT Settings → JWT Secret
SUPABASE_JWT_SECRET=your-jwt-secret-here

# ----------------------------------------------
# University of Waterloo Open Data API
# ----------------------------------------------
# Base URL for UW API (v3)
# Documentation: https://uwaterloo.atlassian.net/wiki/spaces/UWAPI/pages/34025641600/Getting+Started+-+OpenAPI
UW_API_BASE=https://openapi.data.uwaterloo.ca/v3

# API Key (request from UW Open Data)
# Register at: https://uwaterloo.ca/api/
# The API key should be sent as X-API-KEY header in v3
UW_API_KEY=your-uw-api-key-here

# ----------------------------------------------
# CORS Configuration
# ----------------------------------------------
# Comma-separated list of allowed origins
CORS_ORIGIN=http://localhost:3000,http://localhost:3001

# For production, add your frontend domain:
# CORS_ORIGIN=https://uwplanit.com,https://www.uwplanit.com

# ----------------------------------------------
# Rate Limiting
# ----------------------------------------------
# Time window in milliseconds (default: 60000 = 1 minute)
RATE_LIMIT_WINDOW_MS=60000

# Maximum requests per window (default: 60)
RATE_LIMIT_MAX_REQUESTS=60

# ----------------------------------------------
# Logging Configuration
# ----------------------------------------------
# Log level: trace | debug | info | warn | error | fatal
LOG_LEVEL=info

# Use debug for development:
# LOG_LEVEL=debug

# Use warn or error for production:
# LOG_LEVEL=warn

# ----------------------------------------------
# Observability & Monitoring (Optional)
# ----------------------------------------------
# Sentry DSN for error tracking
SENTRY_DSN=

# Example:
# SENTRY_DSN=https://[KEY]@[ORG].ingest.sentry.io/[PROJECT]

# ----------------------------------------------
# Feature Flags (Optional)
# ----------------------------------------------
# Enable/disable ETL scheduling
ENABLE_ETL_SCHEDULER=false

# Enable/disable metrics collection
ENABLE_METRICS=false

# ----------------------------------------------
# Development/Testing (Optional)
# ----------------------------------------------
# Skip authentication in development (not recommended)
# SKIP_AUTH=false

# Mock UW API responses (for testing without API key)
# MOCK_UW_API=false

# ----------------------------------------------
# Production Optimizations (Optional)
# ----------------------------------------------
# Database connection pool size
# DB_POOL_MAX=20

# Redis connection pool size
# REDIS_POOL_MAX=10

# Request timeout in milliseconds
# REQUEST_TIMEOUT=30000

